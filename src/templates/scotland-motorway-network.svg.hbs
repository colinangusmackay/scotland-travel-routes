<svg version="1.1"
     baseProfile="full"
     width="8000" height="8000"
     xmlns="http://www.w3.org/2000/svg">
  <style>
    @font-face {
        font-family: "Fira Sans Condensed";
        src: url("https://fonts.googleapis.com/css?family=Fira+Sans+Condensed&amp;display=swap");
    }
  </style>
    <!-- Background -->
    <rect width="100%" height="100%" fill="white" stroke="#dddddd"/>
    {{#setData "routes"}}
{
  "M8":{
    "colour":"red", "contrastColour":"white",
    "name":"M8", "route":"Edinburgh City Bypass - Greenock",
    "dx":10, "dy":100,
    "junctions": {
      "J1": {
        "number": "J1", "name": "Edinburgh City Bypass",
        "type": "terminator", "angle": "ew", "terminatorLabelOffset": "e",
        "x":7900, "y": 4000
      },
      "J2": {
        "number": "J2", "name": "Ratho",
        "type": "interchange", "angle": "ew",
        "x":7700, "y": 4000
      },
      "J3": {
        "number": "J3", "name": "Livingston",
        "type": "standard", "angle": "ew",
        "x":7500, "y": 4000
      },
      "J3A": {
        "number": "J3A", "name": "Bathgate",
        "type": "standard", "angle": "ew",
        "x":7300, "y": 4000
      },
      "J4": {
        "number": "J4", "name": "Whitburn",
        "type": "standard", "angle": "ew",
        "x":7100, "y": 4000
      },
      "J4A": {
        "number": "J4A", "name": "Heartlands",
        "type": "standard", "angle": "ew",
        "x":6900, "y": 4000
      },
      "S_4A_5": {
        "number": "Services", "name": "Heart of Scotland Services",
        "type": "services", "angle": "ew",
        "x":6700, "y": 4000
      },
      "J5": {
        "number": "J5", "name": "Harthill",
        "type": "standard", "angle": "ew",
        "x":6500, "y": 4000
      },
      "J6": {
        "number": "J6", "name": "Newhouse",
        "type": "standard", "angle": "ew",
        "x":6300, "y": 4000
      },
      "J6A": {
        "number": "J6A", "name": "Chapelhall",
        "type": "standard", "angle": "ew",
        "x":6100, "y": 4000
      },
      "J7": {
        "number": "J7", "name": "Eurocentral",
        "type": "standard", "angle": "ew",
        "x":5900, "y": 4000
      },
      "J7A": {
        "number": "J7A", "name": "Shawhead",
        "type": "standard", "angle": "ew",
        "x":5700, "y": 4000
      },
      "J8": {
        "number": "J8", "name": "Baillieston",
        "type": "interchange", "angle": "ew",
        "x":5500, "y": 4000
      },
      "J9": {
        "number": "J9", "name": "Easterhouse",
        "type": "standard", "angle": "ew",
        "x":5300, "y": 4000
      },
      "J10": {
        "number": "J10", "name": "Bartlebeith",
        "type": "standard", "angle": "ew",
        "x":5100, "y": 4000
      },
      "J30": {
        "number": "J30", "name": "Bishopton",
        "type": "interchange", "angle": "ew",
        "x":300, "y": 4000
      },
      "J31": {
        "number": "J31", "name": "Greenock",
        "type": "terminator", "angle": "ew", "terminatorLabelOffset": "w",
        "x":100, "y": 4000
      }
    }
  },
  "M9":{
    "colour":"purple", "contrastColour": "white",
    "name":"M9", "route":"Newbridge - Dunblane",
    "dx":10, "dy":300},
  "M73":{
    "colour":"yellow", "contrastColour": "black",
    "name":"M73", "route":"Maryville - Mollinsburn",
    "dx":10, "dy":500},
  "M74":{
    "colour":"blue", "contrastColour": "white",
    "name":"M74", "route":"Tradeston - Gretna",
    "dx":10, "dy":700},
  "M77":{
    "colour":"dark-green", "contrastColour": "white",
    "name":"M77", "route":"Tradeston - Fenwick",
    "dx":10, "dy":900},
  "M80":{
    "colour":"green", "contrastColour": "white",
    "name":"M80", "route":"Provan - Stirling",
    "dx":10, "dy":1100},
  "M90":{
    "colour":"cyan", "contrastColour": "black",
    "name":"M90", "route":"Kirliston - Perth",
    "dx":10, "dy":1300},
  "M876":{
    "colour":"pink", "contrastColour": "black",
    "name":"M876", "route":"Denny - Kincardine",
    "dx":10, "dy":1500},
  "M898":{
    "colour":"silver", "contrastColour": "black",
    "name":"M898", "route":"Bishopton - Erskine Bridge",
    "dx":10, "dy":1700,
    "junctions":{
      "S": {
        "number": "", "name": "Bishopton",
        "type": "interchange", "angle": "ns",
        "x":300, "y": 4000
      },
      "J1": {
        "number": "J1", "name": "Erskine",
        "type": "standard", "angle": "ns",
        "x":300, "y": 3800
      },
      "T": {
        "number": "", "name": "Erskine Bridge",
        "type": "terminator", "angle": "ns", "terminatorLabelOffset": "n",
        "x":300, "y": 3600
      }
    }
  }
}
    {{/setData}}

  {{#each routes}}
      <!-- Legend for {{name}} : {{route}} -->
      <rect x="{{offset dx 0}}" y="{{offset dy 0}}" fill="{{colour}}" height="200" width="3500" stroke="white" stroke-width="1"/>
      <g text-anchor="start" font-size="180px" dominant-baseline="middle" fill="{{contrastColour}}" font-family="Fira Sans Condensed">
          <text x="{{offset dx 50}}" y="{{offset dy 100}}" font-weight="bold">{{name}}</text>
          <text x="{{offset dx 600}}" y="{{offset dy 100}}">{{route}}</text>
      </g>

    {{#each junctions}}
      <!-- {{../name}} {{number}} : {{name}} -->
      <!-- Connector: --> {{renderConnector this}}

    {{/each}}

    {{#each junctions}}
        <!-- Terminator: --> {{renderTerminator this}}
        <!-- Interchange: --> {{renderInterchange this}}
        <!-- Cell: --> {{renderCell this}}
    {{/each}}
  {{/each}}

</svg>