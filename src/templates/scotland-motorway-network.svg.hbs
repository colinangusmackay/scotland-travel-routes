<svg version="1.1"
     baseProfile="full"
     width="8000" height="8000"
     xmlns="http://www.w3.org/2000/svg">
  <style>
    @font-face {
        font-family: "Fira Sans Condensed";
        src: url("https://fonts.googleapis.com/css?family=Fira+Sans+Condensed&amp;display=swap");
    }
  </style>
    <!-- Background -->
    <rect width="100%" height="100%" fill="white" stroke="#dddddd"/>
    {{#setData "routes"}}
{
  "M8":{
    "colour":"red", "contrastColour":"white",
    "name":"M8", "route":"Edinburgh City Bypass - Greenock",
    "dx":10, "dy":100,
    "junctions": {
      "J1": {
        "number": "J1", "name": "Edinburgh City Bypass", "labelOffset": "s",
        "type": "terminator", "angle": "ew", "terminatorLabelOffset": "e",
        "x":7700, "y": 4100
      },
      "J2": {
        "number": "J2", "name": "Ratho", "labelOffset": "s",
        "type": "interchange", "angle": "ew", "connectionToPrevious": "rounded-s",
        "x":7400, "y": 4000
      },
      "J3": {
        "number": "J3", "name": "Livingston", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":7200, "y": 4000
      },
      "J3A": {
        "number": "J3A", "name": "Bathgate", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":7000, "y": 4000
      },
      "J4": {
        "number": "J4", "name": "Whitburn", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":6800, "y": 4000
      },
      "J4A": {
        "number": "J4A", "name": "Heartlands", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":6600, "y": 4000
      },
      "S_4A_5": {
        "number": "Services", "name": "Heart of Scotland Services", "labelOffset": "n",
        "type": "services", "angle": "ew", "serviceSides": "n,s",
        "x":6300, "y": 4000
      },
      "J5": {
        "number": "J5", "name": "Harthill", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":6000, "y": 4000
      },
      "J6": {
        "number": "J6", "name": "Newhouse", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":5800, "y": 4000
      },
      "J6A": {
        "number": "J6A", "name": "Chapelhall", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":5600, "y": 4000
      },
      "J7": {
        "number": "J7", "name": "Eurocentral", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":5400, "y": 4000
      },
      "J7A": {
        "number": "J7A", "name": "Shawhead", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":5200, "y": 4000
      },
      "J8": {
        "number": "J8", "name": "Baillieston", "labelOffset": "ne",
        "type": "interchange", "angle": "ew",
        "x":4800, "y": 4000
      },
      "J9": {
        "number": "J9", "name": "Easterhouse", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":4600, "y": 4000
      },
      "J10": {
        "number": "J10", "name": "Bartlebeith", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":4400, "y": 4000
      },
      "J11": {
        "number": "J11", "name": "Stepps", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":4200, "y": 4000
      },
      "J12": {
        "number": "J12", "name": "Riddrie", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":4000, "y": 4000
      },
      "J13": {
        "number": "J13", "name": "Provan", "labelOffset": "s",
        "type": "interchange", "angle": "ew",
        "x":3800, "y": 4000
      },
      "J14": {
        "number": "J14", "name": "Fruit Market", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":3600, "y": 4000
      },
      "J15": {
        "number": "J15", "name": "Townhead", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":3400, "y": 4000
      },
      "J16": {
        "number": "J16", "name": "Craighall", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":3200, "y": 4000
      },
      "J17": {
        "number": "J17", "name": "Great Western Road", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":3000, "y": 4000
      },
      "J18": {
        "number": "J18", "name": "Charing Cross", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":2800, "y": 4000
      },
      "J19": {
        "number": "J19", "name": "Anderston", "labelOffset": "e",
        "type": "standard", "angle": "ns", "connectionToPrevious": "rounded",
        "x":2700, "y": 4150
      },
      "J20": {
        "number": "J20", "name": "Kingston Bridge", "labelOffset": "e",
        "type": "standard", "angle": "ns",
        "x":2700, "y": 4250
      },
      "J21": {
        "number": "J21", "name": "Seaward Street", "labelOffset": "n",
        "type": "interchange", "angle": "ew", "connectionToPrevious": "rounded",
        "x":2500, "y": 4400
      },
      "J22": {
        "number": "J22", "name": "Plantation", "labelOffset": "n",
        "type": "interchange", "angle": "ew",
        "x":2150, "y": 4400
      },
      "J23": {
        "number": "J23", "name": "Dumbreck Road", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":1900, "y": 4400
      },
      "J24": {
        "number": "J24", "name": "Helen Street", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":1700, "y": 4400
      },
      "J25": {
        "number": "J25", "name": "Cardonald", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":1500, "y": 4400
      },
      "J25A": {
        "number": "J25A", "name": "Breahead", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":1350, "y": 4400
      },
      "J26": {
        "number": "J26", "name": "Hillington", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":1200, "y": 4400
      },
      "J27": {
        "number": "J27", "name": "Arkleston", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":1050, "y": 4400
      },
      "J28": {
        "number": "J28", "name": "Glasgow Airport", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":850, "y": 4400
      },
      "J28A": {
        "number": "J28A", "name": "A737", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":725, "y": 4400
      },
      "J29": {
        "number": "J29", "name": "St. James", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":550, "y": 4400
      },
      "J30": {
        "number": "J30", "name": "Bishopton",
        "type": "interchange", "angle": "ew", "labelOffset": "s",
        "x":400, "y": 4400
      },
      "J31": {
        "number": "J31", "name": "Greenock", "labelOffset": "n",
        "type": "terminator", "angle": "ew", "terminatorLabelOffset": "w",
        "x":150, "y": 4400
      }
    }
  },
  "M9":{
    "colour":"purple", "contrastColour": "white",
    "name":"M9", "route":"Newbridge - Dunblane",
    "dx":10, "dy":300},
  "M73":{
    "colour":"yellow", "contrastColour": "black",
    "name":"M73", "route":"Maryville - Mollinsburn",
    "dx":10, "dy":500},
  "M74":{
    "colour":"blue", "contrastColour": "white",
    "name":"M74", "route":"Tradeston - Gretna",
    "dx":10, "dy":700,
    "junctions": {
      "J0": {
        "number": "M8", "name": "M74", "labelOffset": "se",
        "type": "interchange", "angle": "ns",
        "x":2500, "y": 4400
      },
      "J1": {
       "number": "J1", "name": "Tradeston", "labelOffset": "s",
        "type": "standard", "angle": "ew", "connectionToPrevious": "rounded",
        "x":2800, "y": 4500
      },
      "J1A": {
        "number": "J1A", "name": "Polmadie", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":3100, "y": 4500
      },
      "J2": {
        "number": "J2", "name": "Rutherglen", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":3400, "y": 4500
      },
      "J2A": {
        "number": "J2A", "name": "Tollcross", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":3750, "y": 4500
      },
      "J3": {
        "number": "J3", "name": "Carmyle", "labelOffset": "s",
        "type": "standard", "angle": "ew",
        "x":4100, "y": 4500
      },
      "J3A": {
        "number": "J3A", "name": "Broomhouse", "labelOffset": "n",
        "type": "standard", "angle": "ew",
        "x":4450, "y": 4500
      },
      "J4": {
        "number": "J4", "name": "M73", "labelOffset": "s",
        "type": "interchange", "angle": "ew",
        "x":4800, "y": 4500
      },
      "S_J4_5_SB": {
        "number": "Services", "name": "Bothwell (SB) Services", "labelOffset": "e", "connectionToPrevious": "rounded",
        "type": "services", "angle": "ns", "serviceSides": "e",
        "x":5000, "y": 4600
      },
      "J5": {
        "number": "J5", "name": "Orbiston", "labelOffset": "e",
        "type": "standard", "angle": "ns",
        "x":5000, "y": 4700
      },
      "S_J5_6_NB": {
        "number": "Services", "name": "Hamilton (NB) Services", "labelOffset": "w",
        "type": "services", "angle": "ns", "serviceSides": "w",
        "x":5000, "y": 4800
      },
      "J6": {
        "number": "J6", "name": "Hamilton", "labelOffset": "w",
        "type": "standard", "angle": "ns",
        "x":5000, "y": 4900
      }
    }
  },
  "M77":{
    "colour":"dark-green", "contrastColour": "white",
    "name":"M77", "route":"Tradeston - Fenwick",
    "dx":10, "dy":900},
  "M80":{
    "colour":"green", "contrastColour": "white",
    "name":"M80", "route":"Provan - Stirling",
    "dx":10, "dy":1100},
  "M90":{
    "colour":"cyan", "contrastColour": "black",
    "name":"M90", "route":"Kirliston - Perth",
    "dx":10, "dy":1300},
  "M876":{
    "colour":"pink", "contrastColour": "black",
    "name":"M876", "route":"Denny - Kincardine",
    "dx":10, "dy":1500},
  "M898":{
    "colour":"silver", "contrastColour": "black",
    "name":"M898", "route":"Bishopton - Erskine Bridge",
    "dx":10, "dy":1700,
    "junctions":{
      "S": {
        "number": "", "name": "Bishopton",
        "type": "interchange", "angle": "ns",
        "x":400, "y": 4400
      },
      "J1": {
        "number": "J1", "name": "Erskine", "labelOffset": "e",
        "type": "standard", "angle": "ns",
        "x":400, "y": 4200
      },
      "T": {
        "number": "", "name": "Erskine Bridge", "labelOffset": "e",
        "type": "terminator", "angle": "ns", "terminatorLabelOffset": "n",
        "x":400, "y": 4000
      }
    }
  }
}
    {{/setData}}

  {{#each routes}}
      <!-- Legend for {{name}} : {{route}} -->
      <rect x="{{offset dx 0}}" y="{{offset dy 0}}" fill="{{colour}}" height="200" width="3500" stroke="white" stroke-width="1"/>
      <g text-anchor="start" font-size="180px" dominant-baseline="middle" fill="{{contrastColour}}" font-family="Fira Sans Condensed">
          <text x="{{offset dx 50}}" y="{{offset dy 100}}" font-weight="bold">{{name}}</text>
          <text x="{{offset dx 600}}" y="{{offset dy 100}}">{{route}}</text>
      </g>

    {{#each junctions}}
      <!-- {{../name}} {{number}} : {{name}} -->
      <!-- Connector: --> {{renderConnector this}}
    {{/each}}

    {{#each junctions}}
      <!-- {{../name}} {{number}} : {{name}} -->{{renderTerminator this}}{{renderServices this}}{{renderInterchange this}}{{renderJunction this}}{{renderLabel this}}{{renderCell this}}
    {{/each}}
  {{/each}}

</svg>